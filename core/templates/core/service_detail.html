{% extends 'base.html' %}
{% load static %}
{% load math_filters %}

{% block title %}{{ service.title }} - Services - {{ site_settings.site_name }}{% endblock %}
{% block meta_description %}{{ service.short_description|default:service.description|truncatewords:30 }}{% endblock %}

{% block extra_css %}
<style>
    .gradient-hero {
        background: linear-gradient(-45deg, #667eea, #764ba2, #f093fb, #4facfe);
        background-size: 400% 400%;
        animation: gradient 15s ease infinite;
    }
    
    @keyframes gradient {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
    }
    
    .feature-card {
        transition: all 0.4s ease;
    }
    
    .feature-card:hover {
        transform: translateY(-8px) scale(1.03);
    }
    
    .sticky-sidebar {
        position: sticky;
        top: 100px;
    }
    
    .check-item {
        transition: all 0.3s ease;
    }
    
    .check-item:hover {
        transform: translateX(4px);
    }
    
    .process-step {
        position: relative;
    }
    
    .process-step::before {
        content: '';
        position: absolute;
        left: 23px;
        top: 60px;
        width: 2px;
        height: calc(100% - 60px);
        background: linear-gradient(to bottom, #3b82f6, #8b5cf6);
    }
    
    .process-step:last-child::before {
        display: none;
    }
</style>
{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="relative pt-32 pb-20 gradient-hero text-white overflow-hidden">
    <div class="absolute inset-0 opacity-20">
        <div class="absolute top-20 left-20 w-96 h-96 bg-white rounded-full mix-blend-multiply filter blur-3xl animate-pulse"></div>
        <div class="absolute bottom-20 right-20 w-96 h-96 bg-yellow-200 rounded-full mix-blend-multiply filter blur-3xl animate-pulse" style="animation-delay: 1s;"></div>
    </div>
    
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="max-w-4xl mx-auto">
            <!-- Breadcrumb -->
            <nav class="mb-8" data-aos="fade-down">
                <ol class="flex items-center flex-wrap gap-2 text-sm opacity-90">
                    <li><a href="{% url 'home' %}" class="hover:text-yellow-300 transition-colors">Home</a></li>
                    <li><i class="fas fa-chevron-right text-xs"></i></li>
                    <li><a href="{% url 'services' %}" class="hover:text-yellow-300 transition-colors">Services</a></li>
                    <li><i class="fas fa-chevron-right text-xs"></i></li>
                    <li class="text-yellow-300">{{ service.title }}</li>
                </ol>
            </nav>
            
            <div class="text-center">
                <!-- Icon Badge -->
                <div class="inline-flex items-center justify-center w-24 h-24 bg-white/20 backdrop-blur-md rounded-3xl mb-8 shadow-2xl" data-aos="zoom-in">
                    <i class="{{ service.icon_class|default:'fas fa-code' }} text-6xl"></i>
                </div>
                
                <!-- Title -->
                <h1 class="text-4xl md:text-6xl font-display font-bold mb-6" data-aos="fade-up">
                    {{ service.title }}
                </h1>
                
                <!-- Short Description -->
                <p class="text-xl md:text-2xl opacity-90 max-w-3xl mx-auto leading-relaxed mb-8" data-aos="fade-up" data-aos-delay="100">
                    {{ service.short_description|default:service.description|truncatewords:30 }}
                </p>
                
                <!-- Quick Stats -->
                <div class="flex flex-wrap justify-center gap-6 text-base" data-aos="fade-up" data-aos-delay="200">
                    {% if service.delivery_time %}
                    <span class="flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full">
                        <i class="fas fa-clock"></i>{{ service.delivery_time }}
                    </span>
                    {% endif %}
                    {% if service.price %}
                    <span class="flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full">
                        <i class="fas fa-dollar-sign"></i>Starting at ${{ service.price }}
                    </span>
                    {% endif %}
                    {% if service.projects_completed %}
                    <span class="flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full">
                        <i class="fas fa-check-circle"></i>{{ service.projects_completed }}+ Projects
                    </span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Main Content -->
<section class="py-20 bg-gray-50 dark:bg-gray-900">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto">
            <div class="grid lg:grid-cols-3 gap-12">
                <!-- Main Content -->
                <div class="lg:col-span-2 space-y-12">
                    <!-- Overview -->
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-6 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-info-circle text-white text-xl"></i>
                            </div>
                            Overview
                        </h2>
                        <div class="prose dark:prose-invert prose-lg max-w-none">
                            {{ service.description|safe }}
                        </div>
                    </div>
                    
                    <!-- What's Included -->
                    {% if service.features or service.deliverables %}
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-check-double text-white text-xl"></i>
                            </div>
                            What's Included
                        </h2>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            {% if service.features %}
                            {% for feature in service.feature_list %}
                            <div class="check-item flex items-start gap-4 p-4 bg-gray-50 dark:bg-gray-900 rounded-xl hover:bg-green-50 dark:hover:bg-green-900/20 transition-all">
                                <div class="w-8 h-8 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center flex-shrink-0">
                                    <i class="fas fa-check text-green-600 dark:text-green-400"></i>
                                </div>
                                <span class="text-gray-700 dark:text-gray-300 font-medium">{{ feature }}</span>
                            </div>
                            {% endfor %}
                            {% endif %}
                        </div>
                        
                        {% if service.deliverables %}
                        <div class="mt-8 p-6 bg-blue-50 dark:bg-blue-900/20 rounded-2xl border-2 border-blue-200 dark:border-blue-800">
                            <h3 class="font-bold text-xl mb-4 flex items-center gap-2 text-blue-600 dark:text-blue-400">
                                <i class="fas fa-box"></i>Deliverables
                            </h3>
                            <ul class="space-y-3">
                                {% for deliverable in service.deliverable_list %}
                                <li class="flex items-start gap-3">
                                    <i class="fas fa-angle-right text-blue-600 mt-1"></i>
                                    <span class="text-gray-700 dark:text-gray-300">{{ deliverable }}</span>
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endif %}
                    </div>
                    {% endif %}
                    
                    <!-- Process -->
                    {% if service.process_steps %}
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-tasks text-white text-xl"></i>
                            </div>
                            How It Works
                        </h2>
                        
                        <div class="space-y-8">
                            {% for step in service.process_step_list %}
                            <div class="process-step flex gap-6">
                                <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center flex-shrink-0 text-white text-xl font-bold shadow-lg z-10">
                                    {{ forloop.counter }}
                                </div>
                                <div class="flex-1 pb-8">
                                    <h3 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">
                                        {{ step.title }}
                                    </h3>
                                    <p class="text-gray-600 dark:text-gray-400 leading-relaxed">
                                        {{ step.description }}
                                    </p>
                                    {% if step.duration %}
                                    <div class="mt-3 text-sm text-gray-500 dark:text-gray-400 flex items-center gap-2">
                                        <i class="fas fa-clock"></i>{{ step.duration }}
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Technologies/Tools -->
                    {% if service.technologies %}
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-toolbox text-white text-xl"></i>
                            </div>
                            Technologies & Tools
                        </h2>
                        
                        <div class="flex flex-wrap gap-3">
                            {% for tech in service.tech_list %}
                            <span class="px-5 py-3 bg-gradient-to-r from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-600 rounded-xl font-semibold hover:from-blue-500 hover:to-purple-600 hover:text-white transition-all cursor-pointer shadow-sm hover:shadow-lg hover:scale-105">
                                {{ tech }}
                            </span>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- Case Studies / Portfolio -->
                    {% if service.related_projects %}
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-pink-500 to-purple-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-folder text-white text-xl"></i>
                            </div>
                            Related Projects
                        </h2>
                        
                        <div class="grid md:grid-cols-2 gap-6">
                            {% for project in service.related_projects %}
                            <a href="{{ project.get_absolute_url }}" class="group block">
                                <div class="bg-gray-50 dark:bg-gray-900 rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all hover:-translate-y-2">
                                    {% if project.featured_image %}
                                    <div class="h-48 overflow-hidden">
                                        <img src="{{ project.featured_image.url }}" 
                                             alt="{{ project.title }}" 
                                             class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                                    </div>
                                    {% endif %}
                                    <div class="p-6">
                                        <h3 class="font-bold text-lg mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                                            {{ project.title }}
                                        </h3>
                                        <p class="text-gray-600 dark:text-gray-400 text-sm line-clamp-2">
                                            {{ project.short_description }}
                                        </p>
                                    </div>
                                </div>
                            </a>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                    
                    <!-- FAQ -->
                    {% if service.faqs %}
                    <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-xl p-8 lg:p-12 border border-gray-100 dark:border-gray-700" data-aos="fade-right">
                        <h2 class="text-3xl font-bold mb-8 flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-yellow-500 to-orange-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-question-circle text-white text-xl"></i>
                            </div>
                            Frequently Asked Questions
                        </h2>
                        
                        <div class="space-y-4">
                            {% for faq in service.faq_list %}
                            <div class="border-2 border-gray-200 dark:border-gray-700 rounded-2xl overflow-hidden">
                                <button class="faq-btn w-full px-6 py-5 text-left flex items-center justify-between hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
                                        onclick="toggleFaq(this)">
                                    <span class="font-semibold text-gray-900 dark:text-white pr-4">{{ faq.question }}</span>
                                    <div class="w-8 h-8 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center flex-shrink-0">
                                        <i class="fas fa-chevron-down text-blue-600 dark:text-blue-400 transition-transform"></i>
                                    </div>
                                </button>
                                <div class="faq-content max-h-0 overflow-hidden transition-all duration-300">
                                    <div class="px-6 py-5 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700">
                                        <p class="text-gray-700 dark:text-gray-300 leading-relaxed">{{ faq.answer }}</p>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                    {% endif %}
                </div>
                
                <!-- Sidebar -->
                <div class="lg:col-span-1">
                    <div class="sticky-sidebar space-y-6" data-aos="fade-left">
                        <!-- Pricing Card -->
                        <div class="bg-white dark:bg-gray-800 rounded-3xl shadow-2xl p-8 border-2 border-gray-100 dark:border-gray-700 overflow-hidden relative">
                            <!-- Decorative gradient -->
                            <div class="absolute top-0 left-0 right-0 h-2 bg-gradient-to-r from-blue-600 to-purple-600"></div>
                            
                            <div class="text-center mb-8">
                                <div class="text-sm text-gray-600 dark:text-gray-400 mb-2">Starting at</div>
                                {% if service.price %}
                                <div class="text-5xl font-bold text-gray-900 dark:text-white mb-2">
                                    ${{ service.price }}
                                </div>
                                {% if service.price_note %}
                                <div class="text-sm text-gray-500 dark:text-gray-400">{{ service.price_note }}</div>
                                {% endif %}
                                {% else %}
                                <div class="text-3xl font-bold text-gray-900 dark:text-white mb-2">
                                    Custom Quote
                                </div>
                                <div class="text-sm text-gray-500 dark:text-gray-400">Based on project scope</div>
                                {% endif %}
                            </div>
                            
                            <!-- Key Features -->
                            <div class="space-y-3 mb-8">
                                {% if service.delivery_time %}
                                <div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                                    <i class="fas fa-clock text-blue-600 dark:text-blue-400"></i>
                                    <span>{{ service.delivery_time }} delivery</span>
                                </div>
                                {% endif %}
                                <div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                                    <i class="fas fa-sync text-green-600 dark:text-green-400"></i>
                                    <span>{% if service.revisions %}{{ service.revisions }}{% else %}Unlimited{% endif %} revisions</span>
                                </div>
                                <div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                                    <i class="fas fa-headset text-purple-600 dark:text-purple-400"></i>
                                    <span>24/7 support</span>
                                </div>
                                <div class="flex items-center gap-3 text-gray-700 dark:text-gray-300">
                                    <i class="fas fa-shield-check text-orange-600 dark:text-orange-400"></i>
                                    <span>Quality guarantee</span>
                                </div>
                            </div>
                            
                            <!-- CTA Buttons -->
                            <div class="space-y-3">
                                <a href="{% url 'contact' %}?service={{ service.slug }}" 
                                   class="block text-center px-6 py-4 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-bold text-lg hover:shadow-2xl hover:scale-105 transition-all duration-300">
                                    <i class="fas fa-paper-plane mr-2"></i>Get Started
                                </a>
                                <a href="{% url 'contact' %}?service={{ service.slug }}&type=consultation" 
                                   class="block text-center px-6 py-4 bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-xl font-bold hover:bg-gray-200 dark:hover:bg-gray-600 transition-all">
                                    <i class="fas fa-comments mr-2"></i>Free Consultation
                                </a>
                            </div>
                            
                            <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700 text-center text-sm text-gray-500 dark:text-gray-400">
                                <i class="fas fa-lock mr-1"></i>
                                Secure payment â€¢ Money-back guarantee
                            </div>
                        </div>
                        
                        <!-- Contact Info -->
                        <div class="bg-gradient-to-br from-blue-600 to-purple-600 text-white rounded-2xl shadow-xl p-6">
                            <h3 class="font-bold text-xl mb-4 flex items-center gap-2">
                                <i class="fas fa-phone-volume"></i>Need Help?
                            </h3>
                            <p class="opacity-90 mb-4 leading-relaxed">
                                Have questions about this service? I'm here to help!
                            </p>
                            <a href="mailto:{{ site_settings.email }}" 
                               class="block text-center px-6 py-3 bg-white text-blue-600 rounded-xl font-bold hover:bg-gray-100 transition-all shadow-lg hover:shadow-xl">
                                {{ site_settings.email }}
                            </a>
                        </div>
                        
                        <!-- Guarantee Badge -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700 text-center">
                            <div class="w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-shield-check text-green-600 dark:text-green-400 text-3xl"></i>
                            </div>
                            <h3 class="font-bold text-lg mb-2 text-gray-900 dark:text-white">100% Satisfaction</h3>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                Money-back guarantee if you're not completely satisfied
                            </p>
                        </div>
                        
                        <!-- Social Share -->
                        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
                            <h3 class="font-semibold mb-4 text-gray-900 dark:text-white">Share This Service</h3>
                            <div class="flex gap-3">
                                <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ service.title|urlencode }}" 
                                   target="_blank"
                                   class="flex-1 aspect-square bg-blue-500 hover:bg-blue-600 text-white rounded-xl flex items-center justify-center transition-all hover:scale-110 shadow-lg">
                                    <i class="fab fa-twitter text-xl"></i>
                                </a>
                                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ request.build_absolute_uri }}" 
                                   target="_blank"
                                   class="flex-1 aspect-square bg-blue-700 hover:bg-blue-800 text-white rounded-xl flex items-center justify-center transition-all hover:scale-110 shadow-lg">
                                    <i class="fab fa-linkedin-in text-xl"></i>
                                </a>
                                <button onclick="copyLink()" 
                                        class="flex-1 aspect-square bg-gray-600 hover:bg-gray-700 text-white rounded-xl flex items-center justify-center transition-all hover:scale-110 shadow-lg">
                                    <i class="fas fa-link text-xl"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Related Services -->
{% if related_services %}
<section class="py-20 bg-white dark:bg-gray-950">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-12" data-aos="fade-up">
            <h2 class="text-4xl lg:text-5xl font-display font-bold mb-4">
                Other <span class="bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">Services</span>
            </h2>
            <p class="text-xl text-gray-600 dark:text-gray-400">
                Explore more ways I can help you
            </p>
        </div>
        
        <div class="max-w-6xl mx-auto grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            {% for related in related_services %}
            <article data-aos="fade-up" data-aos-delay="{{ forloop.counter0|mul:100 }}">
                <a href="{{ related.get_absolute_url }}" class="block group">
                    <div class="feature-card bg-gray-50 dark:bg-gray-800 rounded-2xl shadow-lg hover:shadow-2xl transition-all p-6 border border-gray-200 dark:border-gray-700 h-full">
                        <div class="w-16 h-16 bg-gradient-to-br {{ related.gradient_colors|default:'from-blue-500 to-purple-600' }} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform shadow-lg">
                            <i class="{{ related.icon_class|default:'fas fa-code' }} text-white text-2xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-2 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors">
                            {{ related.title }}
                        </h3>
                        <p class="text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-3">
                            {{ related.short_description|truncatewords:15 }}
                        </p>
                        <div class="flex items-center justify-between pt-4 border-t border-gray-200 dark:border-gray-700">
                            {% if related.price %}
                            <span class="font-bold text-blue-600 dark:text-blue-400">From ${{ related.price }}</span>
                            {% else %}
                            <span class="text-sm text-gray-500">Custom pricing</span>
                            {% endif %}
                            <span class="text-blue-600 dark:text-blue-400 group-hover:translate-x-1 transition-transform">
                                <i class="fas fa-arrow-right"></i>
                            </span>
                        </div>
                    </div>
                </a>
            </article>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA -->
<section class="py-24 gradient-hero text-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-4xl mx-auto text-center" data-aos="zoom-in">
            <div class="w-20 h-20 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-8">
                <i class="fas fa-rocket text-5xl"></i>
            </div>
            <h2 class="text-4xl lg:text-6xl font-display font-bold mb-6">
                Ready to Start?
            </h2>
            <p class="text-xl lg:text-2xl opacity-90 mb-10 max-w-3xl mx-auto leading-relaxed">
                Let's discuss your project and create a solution tailored to your needs
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="{% url 'contact' %}?service={{ service.slug }}" 
                   class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-white text-blue-600 rounded-full font-bold text-lg hover:shadow-2xl hover:scale-105 transition-all duration-300">
                    <i class="fas fa-envelope"></i>Get Started Now
                </a>
                <a href="{% url 'services' %}" 
                   class="inline-flex items-center justify-center gap-2 px-8 py-4 bg-transparent border-2 border-white text-white rounded-full font-bold text-lg hover:bg-white hover:text-blue-600 transition-all duration-300">
                    <i class="fas fa-arrow-left"></i>View All Services
                </a>
            </div>
        </div>
    </div>
</section>

{% endblock %}

{% block extra_js %}
<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

<script>
// Initialize AOS
AOS.init({ duration: 1000, once: true, offset: 100 });

// FAQ Toggle
function toggleFaq(button) {
    const content = button.nextElementSibling;
    const icon = button.querySelector('i');
    const isOpen = content.style.maxHeight;
    
    // Close all others
    document.querySelectorAll('.faq-content').forEach(c => {
        if (c !== content) {
            c.style.maxHeight = null;
            c.previousElementSibling.querySelector('i').classList.remove('rotate-180');
        }
    });
    
    // Toggle current
    if (isOpen) {
        content.style.maxHeight = null;
        icon.classList.remove('rotate-180');
    } else {
        content.style.maxHeight = content.scrollHeight + 'px';
        icon.classList.add('rotate-180');
    }
}

// Copy link
function copyLink() {
    const url = window.location.href;
    navigator.clipboard.writeText(url).then(() => {
        const toast = document.createElement('div');
        toast.className = 'fixed bottom-4 right-4 bg-green-500 text-white px-6 py-4 rounded-xl shadow-2xl z-50';
        toast.innerHTML = '<i class="fas fa-check-circle mr-2"></i>Link copied to clipboard!';
        document.body.appendChild(toast);
        setTimeout(() => toast.remove(), 3000);
    });
}

// Smooth scroll
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    });
});
</script>
{% endblock %}